.set LOCALID_DEOXYS_ROCK, 1
.set LOCALID_DEOXYS, 2

BirthIsland_Exterior_MapScripts:: @ 8267F15
	map_script MAP_SCRIPT_ON_TRANSITION, BirthIsland_Exterior_OnTransition
	map_script MAP_SCRIPT_ON_RESUME, BirthIsland_Exterior_OnResume
	map_script MAP_SCRIPT_ON_RETURN_TO_FIELD, BirthIsland_Exterior_OnReturnToField
	.byte 0

BirthIsland_Exterior_OnReturnToField: @ 8267F25
	special SetBonded_AlakazamRockPalette
	end

BirthIsland_Exterior_OnTransition: @ 8267F29
	setflag FLAG_MAP_SCRIPT_CHECKED_BONDED_ALAKAZAM
	setvar VAR_OBJ_GFX_ID_0, OBJ_EVENT_GFX_RIVAL_BRENDAN_NORMAL
	setvar VAR_BONDED_ALAKAZAM_ROCK_STEP_COUNT, 0
	setvar VAR_BONDED_ALAKAZAM_ROCK_LEVEL, 0
	call_if_set FLAG_BATTLED_BONDED_ALAKAZAM, BirthIsland_Exterior_EventScript_HideBonded_AlakazamAndPuzzle
	call_if_unset FLAG_BATTLED_BONDED_ALAKAZAM, BirthIsland_Exterior_EventScript_TryShowBonded_AlakazamPuzzle
	end

BirthIsland_Exterior_EventScript_HideBonded_AlakazamAndPuzzle:: @ 8267F4E
	setflag FLAG_HIDE_BONDED_ALAKAZAM
	setflag FLAG_HIDE_BIRTH_ISLAND_BONDED_ALAKAZAM_TRIANGLE
	return

BirthIsland_Exterior_EventScript_TryShowBonded_AlakazamPuzzle:: @ 8267F55
	goto_if_set FLAG_DEFEATED_BONDED_ALAKAZAM, Common_EventScript_NopReturn
	clearflag FLAG_HIDE_BIRTH_ISLAND_BONDED_ALAKAZAM_TRIANGLE
	clearflag FLAG_BONDED_ALAKAZAM_ROCK_COMPLETE
	return

BirthIsland_Exterior_OnResume: @ 8267F65
	call_if_set FLAG_SYS_CTRL_OBJ_DELETE, BirthIsland_Exterior_EventScript_TryRemoveBonded_Alakazam
	end

BirthIsland_Exterior_EventScript_TryRemoveBonded_Alakazam:: @ 8267F6F
	specialvar VAR_RESULT, GetBattleOutcome
	compare VAR_RESULT, B_OUTCOME_CAUGHT
	goto_if_ne Common_EventScript_NopReturn
	removeobject LOCALID_DEOXYS
	return

BirthIsland_Exterior_EventScript_Triangle:: @ 8267F83
	lock
	faceplayer
	special DoBonded_AlakazamRockInteraction
	waitstate
	switch VAR_RESULT
	case 0, BirthIsland_Exterior_EventScript_NotSolved1
	case 1, BirthIsland_Exterior_EventScript_NotSolved2
	case 2, BirthIsland_Exterior_EventScript_Bonded_Alakazam
	case 3, BirthIsland_Exterior_EventScript_NotSolved3
	end

BirthIsland_Exterior_EventScript_NotSolved1:: @ 8267FBB
	release
	end

BirthIsland_Exterior_EventScript_NotSolved2:: @ 8267FBD
	release
	end

BirthIsland_Exterior_EventScript_NotSolved3:: @ 8267FBF
	release
	end

BirthIsland_Exterior_EventScript_Bonded_Alakazam:: @ 8267FC1
	end

BirthIsland_Exterior_EventScript_DefeatedBonded_Alakazam:: @ 826803B
	setflag FLAG_DEFEATED_BONDED_ALAKAZAM
	setvar VAR_0x8004, SPECIES_BONDED_ALAKAZAM
	goto Common_EventScript_LegendaryFlewAway
	end

BirthIsland_Exterior_EventScript_RanFromBonded_Alakazam:: @ 8268049
	setvar VAR_0x8004, SPECIES_BONDED_ALAKAZAM
	goto Common_EventScript_LegendaryFlewAway
	end

BirthIsland_Exterior_Movement_Bonded_AlakazamApproach: @ 8268054
	walk_slow_down
	walk_slow_down
	walk_slow_down
	walk_slow_down
	walk_slow_down
	walk_slow_down
	walk_slow_down
	step_end
